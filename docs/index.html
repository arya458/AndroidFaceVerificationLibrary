<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Android Face Verification Library by Aria Danesh</title>

    <!-- Meta Tags -->
    <meta name="author" content="Aria Danesh">
    <meta name="description" content="A modern Jetpack Compose library for real-time face detection and smile verification on Android using ML Kit and CameraX.">
    <meta name="keywords" content="aria danesh, android face verification, face detection, ml kit, jetpack compose, camerax, biometric, facial recognition, kotlin, android library">
    <meta property="og:title" content="Android Face Verification Library">
    <meta property="og:description" content="A simple and powerful Jetpack Compose library for adding face and smile detection to your Android app.">
    <meta property="og:type" content="website">
    <meta property="og:author" content="Aria Danesh">

    <!-- Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark shadow-sm fixed-top">
    <div class="container">
        <a class="navbar-brand" href="#">
            <i class="bi bi-camera-reels-fill"></i>
            Face Verification
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="#features">Features</a></li>
                <li class="nav-item"><a class="nav-link" href="#installation">Installation</a></li>
                <li class="nav-item"><a class="nav-link" href="#usage">Usage</a></li>
                <li class="nav-item"><a class="nav-link" href="#contributing">Contributing</a></li>
            </ul>
        </div>
    </div>
</nav>

<!-- Hero Section -->
<section class="hero text-center">
    <div class="container">
        <h1 class="display-4 fw-bold">Android Face Verification Library</h1>
        <p class="lead">Add real-time face and smile detection to your Compose app with minimal effort.</p>
        <div class="mt-4">
            <a href="#installation" class="btn btn-light btn-lg me-2">Get Started</a>
            <a href="https://github.com/arya458/AndroidFaceVerificationLibrary" target="_blank" class="btn btn-outline-light btn-lg">
                <i class="bi bi-github"></i> View on GitHub
            </a>
        </div>
    </div>
</section>

<!-- Features Section -->
<section id="features" class="container">
    <h2 class="text-center">Why Use This Library?</h2>
    <div class="row text-center">
        <div class="col-md-4">
            <div class="feature-card">
                <div class="card-body">
                    <i class="bi bi-rocket-takeoff-fill"></i>
                    <h5 class="card-title">Simple Integration</h5>
                    <p class="card-text">Integrate with just one Composable and a simple callback.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="feature-card">
                <div class="card-body">
                    <i class="bi bi-palette-fill"></i>
                    <h5 class="card-title">Highly Customizable</h5>
                    <p class="card-text">Easily configure smile sensitivity, colors, and UI states.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="feature-card">
                <div class="card-body">
                    <i class="bi bi-shield-check"></i>
                    <h5 class="card-title">Modern & Reliable</h5>
                    <p class="card-text">Built with CameraX, ML Kit, and Compose for lifecycle-aware performance.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Installation Section -->
<section id="installation" class="container">
    <h2 class="text-center">Installation</h2>
    <h4>1. Add Dependencies</h4>
    <p>In your app-level `build.gradle.kts`, add the following:</p>
    <pre class="code-block"><code>dependencies {
    // CameraX for camera functionality
    implementation("androidx.camera:camera-core:1.3.1")
    implementation("androidx.camera:camera-camera2:1.3.1")
    implementation("androidx.camera:camera-lifecycle:1.3.1")
    implementation("androidx.camera:camera-view:1.3.1")

    // Google ML Kit for Face Detection
    implementation("com.google.mlkit:face-detection:16.1.6")

    // Coil for loading the captured image (recommended)
    implementation("io.coil-kt:coil-compose:2.5.0")

    // Finally, include this library as a module
    implementation(project(":FaceVerificationLib"))
}</code></pre>
    <h4>2. Add Permissions</h4>
    <p>Add camera permissions to your `AndroidManifest.xml`:</p>
    <pre class="code-block"><code>&lt;uses-feature android:name="android.hardware.camera.any" /&gt;
&lt;uses-permission android:name="android.permission.CAMERA" /&gt;

&lt;!-- Optional: for saving images to storage --&gt;
&lt;uses-permission
    android:name="android.permission.WRITE_EXTERNAL_STORAGE"
    android:maxSdkVersion="28" /&gt;</code></pre>
</section>

<!-- Usage Section -->
<section id="usage" class="container">
    <h2 class="text-center">Usage Example</h2>
    <p>Using the library is as simple as adding the `FaceVerificationComponent` to your UI and handling the `onSmileDetected` callback.</p>
    <pre class="code-block"><code>@Composable
fun FaceVerificationTestScreen() {
    val context = LocalContext.current
    val coroutineScope = rememberCoroutineScope()
    var savedImageUri by remember { mutableStateOf&lt;Uri?&gt;(null) }

    if (savedImageUri != null) {
        // Show the captured image after detection
        CapturedImageScreen(
            imageUri = savedImageUri!!,
            onRetake = { savedImageUri = null }
        )
    } else {
        // Show the face verification view
        FaceVerificationComponent(
            onSmileDetected = { imageProxy ->
                Log.d("MainActivity", "Smile detected! Processing image...")
                coroutineScope.launch {
                    // Convert to a Bitmap using the library's helper
                    val bitmap = imageProxyToBitmap(imageProxy)
                    // IMPORTANT: Always close the proxy after use!
                    imageProxy.close()

                    if (bitmap != null) {
                        val uri = saveBitmap(context, bitmap, "smile_capture.jpg")
                        savedImageUri = uri // Update UI to show the image
                    }
                }
            }
        )
    }
}

private suspend fun saveBitmap(context: Context, bitmap: Bitmap, filename: String): Uri? {
    return withContext(Dispatchers.IO) {
        val resolver = context.contentResolver
        val contentValues = ContentValues().apply {
            put(MediaStore.MediaColumns.DISPLAY_NAME, filename)
            put(MediaStore.MediaColumns.MIME_TYPE, "image/jpeg")
            put(MediaStore.MediaColumns.RELATIVE_PATH, "Pictures/YourAppName")
        }

        var uri: Uri? = null
        try {
            uri = resolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, contentValues)
                ?: throw IOException("Failed to create new MediaStore record.")

            resolver.openOutputStream(uri)?.use { stream ->
                if (!bitmap.compress(Bitmap.CompressFormat.JPEG, 95, stream)) {
                    throw IOException("Failed to save bitmap.")
                }
            }
            uri
        } catch (e: Exception) {
            Log.e("BitmapSaver", "Error saving bitmap: ${e.message}")
            // Clean up the created entry if saving fails
            uri?.let { resolver.delete(it, null, null) }
            null
        }
    }
}</code></pre>
</section>

<!-- Contributing Section -->
<section id="contributing" class="container">
    <div class="author-section">
        <div class="author-name">Aria Danesh</div>
        <p class="text-secondary">Creator & Maintainer</p>
        <div class="social-links">
            <a href="https://github.com/arya458" target="_blank" title="GitHub"><i class="bi bi-github"></i></a>
            <a href="https://www.linkedin.com/in/aria-danesh-574ab8162/" target="_blank" title="LinkedIn"><i class="bi bi-linkedin"></i></a>
        </div>
        <p class="mt-3">Passionate about modern Android development and accessible AI-driven user experiences.</p>
        <p>Contributions are welcome! Found a bug? Have an idea? Feel free to <a href="https://github.com/arya458/AndroidFaceVerificationLibrary/issues" target="_blank">open an issue</a> or submit a pull request.</p>
    </div>
</section>


<!-- Footer -->
<footer class="footer text-center">
    <div class="container">
        <p>&copy; 2025 Aria Danesh. Licensed under the Apache License, Version 2.0.</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
